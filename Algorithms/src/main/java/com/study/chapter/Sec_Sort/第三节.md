# 2.3 快速排序
实现简单，适用于各种不同输入，特点是原地排序，且排序时间是线性代数级别，
内循环短小。缺点是太脆弱。
## 2.3.1 基本算法
快速排序是一种分治的排序算法，将数组分成两个子数组，独立排序。
快速排序和归并排序是互补的，
归并是将数组分治两个数组分别排序，并将有序的子数组归并；
快速当两个子数组有序时整个数组也有序。
归并，一个数组等分；快速则根据选择的切点元素（左边小于，右边大于）。

该方法的关键在于切分，这个过程是的数组满足以下条件
+ 对于某个j，a【j】以及排定
+ a【lo】到a【j-1】中的所有元素都不大于a【j】
+ a【j+1】到a【hi】中的所有元素都不小于a【j】

实现切分方法，一般是随机得取a【lo】作为切分元素，从数组从左向右扫描直到找到一个
大于等于切分元素的元素i，再从右向左扫描直到找到一个小于等于切分元素的元素j，交换他们的位置
如此继续，直到两个指针相遇，将切分元素和左子数组最右侧的元素a[j]交换然后返回j

### 2.3.1.1 原地切分
### 2.3.1.2 别越界
### 2.3.1.3 保持随机性
### 2.3.1.4 终止循环
### 2.3.1.5 处理切分元素有重复的情况
### 2.3.1.6 终止递归

## 2.3.2 性能特点
切分方法时的内循环调用了一个定值和递增的索引比较，这种简洁性也是快速的一个优点

快速的比较次数比较少。排序效率最终还是依赖切分数组的效果，而这依赖于切分元素的值。

最好情况是对半分，还有一个潜在缺点，切分不平衡时极为低效，因此，先随机排序
## 2.3.3 算法改进
### 2.3.3.1 切换到插入排序
+ 对于小数组，快速排序比插入排序慢
+ 因为递归，快速排序的sort在小数组中也会调用自己

切换插入排序if(hi<=lo+M)Insertion.sort
,M的值和系统相关，但5-15都还可以

### 2.3.3.2 三取样切分
### 2.3.3.3 熵最优的排序
实际中常出现大量重复主键的元素，快速排序性能尚可，但仍可以改进。

一个简单的想法就是三分原数组，分别对应小于，等于，大于

对于只有若干不同主键的随机数组，归并排序的复杂度是线性对数，而三向切分是线性。
当存在重复主键，三向就比归并要好得多。这种对重复元素的适应性使得三向切分成为最佳选择。
#Q&A



